{"index":{"version":"0.5.12","fields":[{"name":"title","boost":10},{"name":"keywords","boost":15},{"name":"body","boost":1}],"ref":"url","documentStore":{"store":{"./":["(instanc","(instancetype)sharedinst","(spcach","(void)storecachedresponse:(nscachedurlrespons","(单例urlcach","(发error消息)","(发失败error消息)","(发成功的消息)","*)cachedrespons","*)request;","*)sharedurlcache;","*instanc","+","+(instancetype)shared{","....",".......","05","1","1.","1.单例是披着羊皮的全局的可变状态","1:","2","2.","2.在多线程并行的情况下,任何其他地方都可以对改单例做修改","20","2018","2:","3","3.永久态是单元测试的天敌","3:","4.","5.","=","==",">","@end","@interfac","@synchronized(self)","[[self","[[targetclass","^{","alloc]","bug","dispatch_once(&once,","dispatch_once_t","dispatch_once运用","error","forrequest:(nsurlrequest","gcd","id","init];","instanc","instance;","nil)","nil;","once;","return","sharedinst","sharedinstance;","spurlcach","static","step","targetclass","toast","volatil","{","}","});","一个工作学习笔记本","主要是考虑到线程安全,同步创建(即按顺序创建,已创建则不创建,用static修饰,所以全局只能创建一个对象出来).","代码未更改,","以前一直习惯用笔纸做笔记,手写代码,这样感觉方便记忆,也有自己独特的味道,瞬间联想到记笔记时的思路.","但是有时候查询是个大问题,所以决定开始使用gitbook.","使用@synchron","刚开始:","单例对象一旦创建,由于单例对象指针是存放在静态区,","单例对象在堆中分配的内存只有在程序终止后才能被释放,过多的使用会消耗内存.","单例应该只用来保存全局的状态，并且不能和任何作用域绑定.如果这些状态的作用域比一个完整的应用程序的生命周期要短,那么这个状态就不能用单例来管理.","单例滥用的坏处","单例的两种写法","客户端","导引","成功回调处理","成功回调处理(因为单例的url","持久化状态是单元测试的敌人，因为单元测试在各个测试用例相互独立的情况下才有效。如果状态从一个测试用例传递到了另外一个，这样就和测试用例的执行顺序就有关系了。有","服务端","没看什么教程,喜欢探索,比较粗糙,不过能达到轻松记录,方便查询的目的就好","测试顺序改为","的测试用例，尤其是那些本来不应该通过的测试用例，是非常糟糕的事情。","缓存了成功的response)","缓存失败response)","过段时间:","避免并行可能创建出两个."]},"length":1},"tokenStore":{"root":{"0":{"5":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}},"docs":{}},"1":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}},"单":{"docs":{},"例":{"docs":{},"是":{"docs":{},"披":{"docs":{},"着":{"docs":{},"羊":{"docs":{},"皮":{"docs":{},"的":{"docs":{},"全":{"docs":{},"局":{"docs":{},"的":{"docs":{},"可":{"docs":{},"变":{"docs":{},"状":{"docs":{},"态":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}},":":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}}}},"2":{"0":{"1":{"8":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}},"docs":{}},"docs":{"./":{"ref":"./","tf":0.007575757575757576}}},"docs":{"./":{"ref":"./","tf":0.007575757575757576}},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}},"在":{"docs":{},"多":{"docs":{},"线":{"docs":{},"程":{"docs":{},"并":{"docs":{},"行":{"docs":{},"的":{"docs":{},"情":{"docs":{},"况":{"docs":{},"下":{"docs":{},",":{"docs":{},"任":{"docs":{},"何":{"docs":{},"其":{"docs":{},"他":{"docs":{},"地":{"docs":{},"方":{"docs":{},"都":{"docs":{},"可":{"docs":{},"以":{"docs":{},"对":{"docs":{},"改":{"docs":{},"单":{"docs":{},"例":{"docs":{},"做":{"docs":{},"修":{"docs":{},"改":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},":":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}}}},"3":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}},".":{"docs":{},"永":{"docs":{},"久":{"docs":{},"态":{"docs":{},"是":{"docs":{},"单":{"docs":{},"元":{"docs":{},"测":{"docs":{},"试":{"docs":{},"的":{"docs":{},"天":{"docs":{},"敌":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}},":":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}}}},"4":{"docs":{},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}},"5":{"docs":{},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}},"docs":{},".":{"docs":{"./":{"ref":"./","tf":0.08333333333333333}},".":{"docs":{},".":{"docs":{},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}},".":{"docs":{},".":{"docs":{},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}},"a":{"docs":{},"g":{"docs":{},"a":{"docs":{},"i":{"docs":{},"n":{"docs":{"./":{"ref":"./","tf":0.08333333333333333}}}}}},"l":{"docs":{},"l":{"docs":{},"o":{"docs":{},"c":{"docs":{},"]":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}}}}}}}},"f":{"docs":{},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{"./":{"ref":"./","tf":0.08333333333333333}}}}},"o":{"docs":{},"r":{"docs":{},"r":{"docs":{},"e":{"docs":{},"q":{"docs":{},"u":{"docs":{},"e":{"docs":{},"s":{"docs":{},"t":{"docs":{},":":{"docs":{},"(":{"docs":{},"n":{"docs":{},"s":{"docs":{},"u":{"docs":{},"r":{"docs":{},"l":{"docs":{},"r":{"docs":{},"e":{"docs":{},"q":{"docs":{},"u":{"docs":{},"e":{"docs":{},"s":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}}},"h":{"docs":{},"o":{"docs":{},"p":{"docs":{},"e":{"docs":{"./":{"ref":"./","tf":0.16666666666666666}}}}}},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{},"r":{"docs":{},"o":{"docs":{},"d":{"docs":{},"u":{"docs":{},"c":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":10}}}}}}}}},"i":{"docs":{},"t":{"docs":{},"]":{"docs":{},";":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}}}}}},"s":{"docs":{},"t":{"docs":{},"a":{"docs":{},"n":{"docs":{},"c":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}},"e":{"docs":{},";":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}},"d":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}},"l":{"docs":{},"i":{"docs":{},"f":{"docs":{},"e":{"docs":{"./":{"ref":"./","tf":0.08333333333333333}}}},"v":{"docs":{},"e":{"docs":{"./":{"ref":"./","tf":0.08333333333333333}}}}}},"o":{"docs":{},"v":{"docs":{},"e":{"docs":{},"r":{"docs":{"./":{"ref":"./","tf":0.08333333333333333}}}}},"n":{"docs":{},"c":{"docs":{},"e":{"docs":{},";":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}},"p":{"docs":{},"r":{"docs":{},"o":{"docs":{},"u":{"docs":{},"d":{"docs":{"./":{"ref":"./","tf":0.08333333333333333}}}}}}},"s":{"docs":{},"t":{"docs":{},"a":{"docs":{},"r":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":0.08333333333333333}}}},"t":{"docs":{},"i":{"docs":{},"c":{"docs":{"./":{"ref":"./","tf":0.022727272727272728}}}}}},"r":{"docs":{},"e":{"docs":{},"n":{"docs":{},"g":{"docs":{},"t":{"docs":{},"h":{"docs":{"./":{"ref":"./","tf":0.08333333333333333}}}}}}}},"e":{"docs":{},"p":{"docs":{"./":{"ref":"./","tf":0.045454545454545456}}}}},"h":{"docs":{},"a":{"docs":{},"r":{"docs":{},"e":{"docs":{},"d":{"docs":{},"i":{"docs":{},"n":{"docs":{},"s":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}},"a":{"docs":{},"n":{"docs":{},"c":{"docs":{},"e":{"docs":{},";":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}}}}}}}}}}}}}}}},"p":{"docs":{},"u":{"docs":{},"r":{"docs":{},"l":{"docs":{},"c":{"docs":{},"a":{"docs":{},"c":{"docs":{},"h":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}},"y":{"docs":{},"o":{"docs":{},"u":{"docs":{},"'":{"docs":{},"r":{"docs":{"./":{"ref":"./","tf":0.08333333333333333}}}}}}},"g":{"docs":{},"i":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":0.07692307692307693}}}},"c":{"docs":{},"d":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}},"\"":{"docs":{},"\"":{"docs":{"./":{"ref":"./","tf":0.07692307692307693}}},"g":{"docs":{},"i":{"docs":{},"t":{"docs":{},"b":{"docs":{},"o":{"docs":{},"o":{"docs":{},"k":{"docs":{},"\"":{"docs":{},":":{"docs":{},"\"":{"1":{"docs":{},".":{"0":{"docs":{},".":{"0":{"docs":{},"\"":{"docs":{},",":{"docs":{"./":{"ref":"./","tf":0.06666666666666667}}}}},"docs":{}}},"docs":{}}},"docs":{},">":{"docs":{},"=":{"1":{"docs":{},".":{"0":{"docs":{},".":{"0":{"docs":{},"\"":{"docs":{"./":{"ref":"./","tf":0.06666666666666667}}}},"docs":{}}},"docs":{}}},"docs":{}}}}}}}}}}}}},"t":{"docs":{},"i":{"docs":{},"t":{"docs":{},"l":{"docs":{},"e":{"docs":{},"\"":{"docs":{},":":{"docs":{},"\"":{"docs":{},"鳗":{"docs":{},"鱼":{"docs":{},"的":{"docs":{},"第":{"docs":{},"一":{"docs":{},"g":{"docs":{},"i":{"docs":{},"t":{"docs":{},"b":{"docs":{},"o":{"docs":{},"o":{"docs":{},"k":{"docs":{},"\"":{"docs":{"./":{"ref":"./","tf":0.06666666666666667}}}}}}}}}}}}}}}}}}}}}}}},"(":{"docs":{},"i":{"docs":{},"n":{"docs":{},"s":{"docs":{},"t":{"docs":{},"a":{"docs":{},"n":{"docs":{},"c":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}},"e":{"docs":{},"t":{"docs":{},"y":{"docs":{},"p":{"docs":{},"e":{"docs":{},")":{"docs":{},"s":{"docs":{},"h":{"docs":{},"a":{"docs":{},"r":{"docs":{},"e":{"docs":{},"d":{"docs":{},"i":{"docs":{},"n":{"docs":{},"s":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}},"s":{"docs":{},"p":{"docs":{},"c":{"docs":{},"a":{"docs":{},"c":{"docs":{},"h":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}},"v":{"docs":{},"o":{"docs":{},"i":{"docs":{},"d":{"docs":{},")":{"docs":{},"s":{"docs":{},"t":{"docs":{},"o":{"docs":{},"r":{"docs":{},"e":{"docs":{},"c":{"docs":{},"a":{"docs":{},"c":{"docs":{},"h":{"docs":{},"e":{"docs":{},"d":{"docs":{},"r":{"docs":{},"e":{"docs":{},"s":{"docs":{},"p":{"docs":{},"o":{"docs":{},"n":{"docs":{},"s":{"docs":{},"e":{"docs":{},":":{"docs":{},"(":{"docs":{},"n":{"docs":{},"s":{"docs":{},"c":{"docs":{},"a":{"docs":{},"c":{"docs":{},"h":{"docs":{},"e":{"docs":{},"d":{"docs":{},"u":{"docs":{},"r":{"docs":{},"l":{"docs":{},"r":{"docs":{},"e":{"docs":{},"s":{"docs":{},"p":{"docs":{},"o":{"docs":{},"n":{"docs":{},"s":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"单":{"docs":{},"例":{"docs":{},"u":{"docs":{},"r":{"docs":{},"l":{"docs":{},"c":{"docs":{},"a":{"docs":{},"c":{"docs":{},"h":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}},"发":{"docs":{},"e":{"docs":{},"r":{"docs":{},"r":{"docs":{},"o":{"docs":{},"r":{"docs":{},"消":{"docs":{},"息":{"docs":{},")":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}},"失":{"docs":{},"败":{"docs":{},"e":{"docs":{},"r":{"docs":{},"r":{"docs":{},"o":{"docs":{},"r":{"docs":{},"消":{"docs":{},"息":{"docs":{},")":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}},"成":{"docs":{},"功":{"docs":{},"的":{"docs":{},"消":{"docs":{},"息":{"docs":{},")":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}}}}}}}}}},"*":{"docs":{},")":{"docs":{},"c":{"docs":{},"a":{"docs":{},"c":{"docs":{},"h":{"docs":{},"e":{"docs":{},"d":{"docs":{},"r":{"docs":{},"e":{"docs":{},"s":{"docs":{},"p":{"docs":{},"o":{"docs":{},"n":{"docs":{},"s":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}},"r":{"docs":{},"e":{"docs":{},"q":{"docs":{},"u":{"docs":{},"e":{"docs":{},"s":{"docs":{},"t":{"docs":{},";":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}},"s":{"docs":{},"h":{"docs":{},"a":{"docs":{},"r":{"docs":{},"e":{"docs":{},"d":{"docs":{},"u":{"docs":{},"r":{"docs":{},"l":{"docs":{},"c":{"docs":{},"a":{"docs":{},"c":{"docs":{},"h":{"docs":{},"e":{"docs":{},";":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}},"i":{"docs":{},"n":{"docs":{},"s":{"docs":{},"t":{"docs":{},"a":{"docs":{},"n":{"docs":{},"c":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}},"+":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}},"(":{"docs":{},"i":{"docs":{},"n":{"docs":{},"s":{"docs":{},"t":{"docs":{},"a":{"docs":{},"n":{"docs":{},"c":{"docs":{},"e":{"docs":{},"t":{"docs":{},"y":{"docs":{},"p":{"docs":{},"e":{"docs":{},")":{"docs":{},"s":{"docs":{},"h":{"docs":{},"a":{"docs":{},"r":{"docs":{},"e":{"docs":{},"d":{"docs":{},"{":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}},"=":{"docs":{"./":{"ref":"./","tf":0.022727272727272728}},"=":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}}}},">":{"docs":{"./":{"ref":"./","tf":0.045454545454545456}}},"@":{"docs":{},"e":{"docs":{},"n":{"docs":{},"d":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{},"e":{"docs":{},"r":{"docs":{},"f":{"docs":{},"a":{"docs":{},"c":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}},"s":{"docs":{},"y":{"docs":{},"n":{"docs":{},"c":{"docs":{},"h":{"docs":{},"r":{"docs":{},"o":{"docs":{},"n":{"docs":{},"i":{"docs":{},"z":{"docs":{},"e":{"docs":{},"d":{"docs":{},"(":{"docs":{},"s":{"docs":{},"e":{"docs":{},"l":{"docs":{},"f":{"docs":{},")":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}},"[":{"docs":{},"[":{"docs":{},"s":{"docs":{},"e":{"docs":{},"l":{"docs":{},"f":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}},"t":{"docs":{},"a":{"docs":{},"r":{"docs":{},"g":{"docs":{},"e":{"docs":{},"t":{"docs":{},"c":{"docs":{},"l":{"docs":{},"a":{"docs":{},"s":{"docs":{},"s":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}},"^":{"docs":{},"{":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}},"b":{"docs":{},"u":{"docs":{},"g":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}},"d":{"docs":{},"i":{"docs":{},"s":{"docs":{},"p":{"docs":{},"a":{"docs":{},"t":{"docs":{},"c":{"docs":{},"h":{"docs":{},"_":{"docs":{},"o":{"docs":{},"n":{"docs":{},"c":{"docs":{},"e":{"docs":{},"(":{"docs":{},"&":{"docs":{},"o":{"docs":{},"n":{"docs":{},"c":{"docs":{},"e":{"docs":{},",":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}},"_":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}},"运":{"docs":{},"用":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}},"e":{"docs":{},"r":{"docs":{},"r":{"docs":{},"o":{"docs":{},"r":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}},"n":{"docs":{},"i":{"docs":{},"l":{"docs":{},")":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}}},";":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}},"r":{"docs":{},"e":{"docs":{},"t":{"docs":{},"u":{"docs":{},"r":{"docs":{},"n":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}}}}}}}},"t":{"docs":{},"a":{"docs":{},"r":{"docs":{},"g":{"docs":{},"e":{"docs":{},"t":{"docs":{},"c":{"docs":{},"l":{"docs":{},"a":{"docs":{},"s":{"docs":{},"s":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}},"o":{"docs":{},"a":{"docs":{},"s":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}},"v":{"docs":{},"o":{"docs":{},"l":{"docs":{},"a":{"docs":{},"t":{"docs":{},"i":{"docs":{},"l":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}},"{":{"docs":{"./":{"ref":"./","tf":0.030303030303030304}}},"}":{"docs":{"./":{"ref":"./","tf":0.03787878787878788}},")":{"docs":{},";":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}},"一":{"docs":{},"个":{"docs":{},"工":{"docs":{},"作":{"docs":{},"学":{"docs":{},"习":{"docs":{},"笔":{"docs":{},"记":{"docs":{},"本":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}},"主":{"docs":{},"要":{"docs":{},"是":{"docs":{},"考":{"docs":{},"虑":{"docs":{},"到":{"docs":{},"线":{"docs":{},"程":{"docs":{},"安":{"docs":{},"全":{"docs":{},",":{"docs":{},"同":{"docs":{},"步":{"docs":{},"创":{"docs":{},"建":{"docs":{},"(":{"docs":{},"即":{"docs":{},"按":{"docs":{},"顺":{"docs":{},"序":{"docs":{},"创":{"docs":{},"建":{"docs":{},",":{"docs":{},"已":{"docs":{},"创":{"docs":{},"建":{"docs":{},"则":{"docs":{},"不":{"docs":{},"创":{"docs":{},"建":{"docs":{},",":{"docs":{},"用":{"docs":{},"s":{"docs":{},"t":{"docs":{},"a":{"docs":{},"t":{"docs":{},"i":{"docs":{},"c":{"docs":{},"修":{"docs":{},"饰":{"docs":{},",":{"docs":{},"所":{"docs":{},"以":{"docs":{},"全":{"docs":{},"局":{"docs":{},"只":{"docs":{},"能":{"docs":{},"创":{"docs":{},"建":{"docs":{},"一":{"docs":{},"个":{"docs":{},"对":{"docs":{},"象":{"docs":{},"出":{"docs":{},"来":{"docs":{},")":{"docs":{},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"代":{"docs":{},"码":{"docs":{},"未":{"docs":{},"更":{"docs":{},"改":{"docs":{},",":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}},"以":{"docs":{},"前":{"docs":{},"一":{"docs":{},"直":{"docs":{},"习":{"docs":{},"惯":{"docs":{},"用":{"docs":{},"笔":{"docs":{},"纸":{"docs":{},"做":{"docs":{},"笔":{"docs":{},"记":{"docs":{},",":{"docs":{},"手":{"docs":{},"写":{"docs":{},"代":{"docs":{},"码":{"docs":{},",":{"docs":{},"这":{"docs":{},"样":{"docs":{},"感":{"docs":{},"觉":{"docs":{},"方":{"docs":{},"便":{"docs":{},"记":{"docs":{},"忆":{"docs":{},",":{"docs":{},"也":{"docs":{},"有":{"docs":{},"自":{"docs":{},"己":{"docs":{},"独":{"docs":{},"特":{"docs":{},"的":{"docs":{},"味":{"docs":{},"道":{"docs":{},",":{"docs":{},"瞬":{"docs":{},"间":{"docs":{},"联":{"docs":{},"想":{"docs":{},"到":{"docs":{},"记":{"docs":{},"笔":{"docs":{},"记":{"docs":{},"时":{"docs":{},"的":{"docs":{},"思":{"docs":{},"路":{"docs":{},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"但":{"docs":{},"是":{"docs":{},"有":{"docs":{},"时":{"docs":{},"候":{"docs":{},"查":{"docs":{},"询":{"docs":{},"是":{"docs":{},"个":{"docs":{},"大":{"docs":{},"问":{"docs":{},"题":{"docs":{},",":{"docs":{},"所":{"docs":{},"以":{"docs":{},"决":{"docs":{},"定":{"docs":{},"开":{"docs":{},"始":{"docs":{},"使":{"docs":{},"用":{"docs":{},"g":{"docs":{},"i":{"docs":{},"t":{"docs":{},"b":{"docs":{},"o":{"docs":{},"o":{"docs":{},"k":{"docs":{},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"使":{"docs":{},"用":{"docs":{},"@":{"docs":{},"s":{"docs":{},"y":{"docs":{},"n":{"docs":{},"c":{"docs":{},"h":{"docs":{},"r":{"docs":{},"o":{"docs":{},"n":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}},"刚":{"docs":{},"开":{"docs":{},"始":{"docs":{},":":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}},"单":{"docs":{},"例":{"docs":{},"对":{"docs":{},"象":{"docs":{},"一":{"docs":{},"旦":{"docs":{},"创":{"docs":{},"建":{"docs":{},",":{"docs":{},"由":{"docs":{},"于":{"docs":{},"单":{"docs":{},"例":{"docs":{},"对":{"docs":{},"象":{"docs":{},"指":{"docs":{},"针":{"docs":{},"是":{"docs":{},"存":{"docs":{},"放":{"docs":{},"在":{"docs":{},"静":{"docs":{},"态":{"docs":{},"区":{"docs":{},",":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}},"在":{"docs":{},"堆":{"docs":{},"中":{"docs":{},"分":{"docs":{},"配":{"docs":{},"的":{"docs":{},"内":{"docs":{},"存":{"docs":{},"只":{"docs":{},"有":{"docs":{},"在":{"docs":{},"程":{"docs":{},"序":{"docs":{},"终":{"docs":{},"止":{"docs":{},"后":{"docs":{},"才":{"docs":{},"能":{"docs":{},"被":{"docs":{},"释":{"docs":{},"放":{"docs":{},",":{"docs":{},"过":{"docs":{},"多":{"docs":{},"的":{"docs":{},"使":{"docs":{},"用":{"docs":{},"会":{"docs":{},"消":{"docs":{},"耗":{"docs":{},"内":{"docs":{},"存":{"docs":{},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"应":{"docs":{},"该":{"docs":{},"只":{"docs":{},"用":{"docs":{},"来":{"docs":{},"保":{"docs":{},"存":{"docs":{},"全":{"docs":{},"局":{"docs":{},"的":{"docs":{},"状":{"docs":{},"态":{"docs":{},"，":{"docs":{},"并":{"docs":{},"且":{"docs":{},"不":{"docs":{},"能":{"docs":{},"和":{"docs":{},"任":{"docs":{},"何":{"docs":{},"作":{"docs":{},"用":{"docs":{},"域":{"docs":{},"绑":{"docs":{},"定":{"docs":{},".":{"docs":{},"如":{"docs":{},"果":{"docs":{},"这":{"docs":{},"些":{"docs":{},"状":{"docs":{},"态":{"docs":{},"的":{"docs":{},"作":{"docs":{},"用":{"docs":{},"域":{"docs":{},"比":{"docs":{},"一":{"docs":{},"个":{"docs":{},"完":{"docs":{},"整":{"docs":{},"的":{"docs":{},"应":{"docs":{},"用":{"docs":{},"程":{"docs":{},"序":{"docs":{},"的":{"docs":{},"生":{"docs":{},"命":{"docs":{},"周":{"docs":{},"期":{"docs":{},"要":{"docs":{},"短":{"docs":{},",":{"docs":{},"那":{"docs":{},"么":{"docs":{},"这":{"docs":{},"个":{"docs":{},"状":{"docs":{},"态":{"docs":{},"就":{"docs":{},"不":{"docs":{},"能":{"docs":{},"用":{"docs":{},"单":{"docs":{},"例":{"docs":{},"来":{"docs":{},"管":{"docs":{},"理":{"docs":{},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"滥":{"docs":{},"用":{"docs":{},"的":{"docs":{},"坏":{"docs":{},"处":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}},"的":{"docs":{},"两":{"docs":{},"种":{"docs":{},"写":{"docs":{},"法":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}},"客":{"docs":{},"户":{"docs":{},"端":{"docs":{"./":{"ref":"./","tf":0.030303030303030304}}}}},"导":{"docs":{},"引":{"docs":{"./":{"ref":"./","tf":10}}}},"成":{"docs":{},"功":{"docs":{},"回":{"docs":{},"调":{"docs":{},"处":{"docs":{},"理":{"docs":{"./":{"ref":"./","tf":0.015151515151515152}},"(":{"docs":{},"因":{"docs":{},"为":{"docs":{},"单":{"docs":{},"例":{"docs":{},"的":{"docs":{},"u":{"docs":{},"r":{"docs":{},"l":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}},"持":{"docs":{},"久":{"docs":{},"化":{"docs":{},"状":{"docs":{},"态":{"docs":{},"是":{"docs":{},"单":{"docs":{},"元":{"docs":{},"测":{"docs":{},"试":{"docs":{},"的":{"docs":{},"敌":{"docs":{},"人":{"docs":{},"，":{"docs":{},"因":{"docs":{},"为":{"docs":{},"单":{"docs":{},"元":{"docs":{},"测":{"docs":{},"试":{"docs":{},"在":{"docs":{},"各":{"docs":{},"个":{"docs":{},"测":{"docs":{},"试":{"docs":{},"用":{"docs":{},"例":{"docs":{},"相":{"docs":{},"互":{"docs":{},"独":{"docs":{},"立":{"docs":{},"的":{"docs":{},"情":{"docs":{},"况":{"docs":{},"下":{"docs":{},"才":{"docs":{},"有":{"docs":{},"效":{"docs":{},"。":{"docs":{},"如":{"docs":{},"果":{"docs":{},"状":{"docs":{},"态":{"docs":{},"从":{"docs":{},"一":{"docs":{},"个":{"docs":{},"测":{"docs":{},"试":{"docs":{},"用":{"docs":{},"例":{"docs":{},"传":{"docs":{},"递":{"docs":{},"到":{"docs":{},"了":{"docs":{},"另":{"docs":{},"外":{"docs":{},"一":{"docs":{},"个":{"docs":{},"，":{"docs":{},"这":{"docs":{},"样":{"docs":{},"就":{"docs":{},"和":{"docs":{},"测":{"docs":{},"试":{"docs":{},"用":{"docs":{},"例":{"docs":{},"的":{"docs":{},"执":{"docs":{},"行":{"docs":{},"顺":{"docs":{},"序":{"docs":{},"就":{"docs":{},"有":{"docs":{},"关":{"docs":{},"系":{"docs":{},"了":{"docs":{},"。":{"docs":{},"有":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"服":{"docs":{},"务":{"docs":{},"端":{"docs":{"./":{"ref":"./","tf":0.030303030303030304}}}}},"没":{"docs":{},"看":{"docs":{},"什":{"docs":{},"么":{"docs":{},"教":{"docs":{},"程":{"docs":{},",":{"docs":{},"喜":{"docs":{},"欢":{"docs":{},"探":{"docs":{},"索":{"docs":{},",":{"docs":{},"比":{"docs":{},"较":{"docs":{},"粗":{"docs":{},"糙":{"docs":{},",":{"docs":{},"不":{"docs":{},"过":{"docs":{},"能":{"docs":{},"达":{"docs":{},"到":{"docs":{},"轻":{"docs":{},"松":{"docs":{},"记":{"docs":{},"录":{"docs":{},",":{"docs":{},"方":{"docs":{},"便":{"docs":{},"查":{"docs":{},"询":{"docs":{},"的":{"docs":{},"目":{"docs":{},"的":{"docs":{},"就":{"docs":{},"好":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"测":{"docs":{},"试":{"docs":{},"顺":{"docs":{},"序":{"docs":{},"改":{"docs":{},"为":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}},"的":{"docs":{},"测":{"docs":{},"试":{"docs":{},"用":{"docs":{},"例":{"docs":{},"，":{"docs":{},"尤":{"docs":{},"其":{"docs":{},"是":{"docs":{},"那":{"docs":{},"些":{"docs":{},"本":{"docs":{},"来":{"docs":{},"不":{"docs":{},"应":{"docs":{},"该":{"docs":{},"通":{"docs":{},"过":{"docs":{},"的":{"docs":{},"测":{"docs":{},"试":{"docs":{},"用":{"docs":{},"例":{"docs":{},"，":{"docs":{},"是":{"docs":{},"非":{"docs":{},"常":{"docs":{},"糟":{"docs":{},"糕":{"docs":{},"的":{"docs":{},"事":{"docs":{},"情":{"docs":{},"。":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"缓":{"docs":{},"存":{"docs":{},"了":{"docs":{},"成":{"docs":{},"功":{"docs":{},"的":{"docs":{},"r":{"docs":{},"e":{"docs":{},"s":{"docs":{},"p":{"docs":{},"o":{"docs":{},"n":{"docs":{},"s":{"docs":{},"e":{"docs":{},")":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}},"失":{"docs":{},"败":{"docs":{},"r":{"docs":{},"e":{"docs":{},"s":{"docs":{},"p":{"docs":{},"o":{"docs":{},"n":{"docs":{},"s":{"docs":{},"e":{"docs":{},")":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}},"过":{"docs":{},"段":{"docs":{},"时":{"docs":{},"间":{"docs":{},":":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}},"避":{"docs":{},"免":{"docs":{},"并":{"docs":{},"行":{"docs":{},"可":{"docs":{},"能":{"docs":{},"创":{"docs":{},"建":{"docs":{},"出":{"docs":{},"两":{"docs":{},"个":{"docs":{},".":{"docs":{"./":{"ref":"./","tf":0.007575757575757576}}}}}}}}}}}}}}},"length":223},"corpusTokens":["\"\"","\"gitbook\":\"1.0.0\",","\"gitbook\":\">=1.0.0\"","\"title\":\"鳗鱼的第一gitbook\"","(instanc","(instancetype)sharedinst","(spcach","(void)storecachedresponse:(nscachedurlrespons","(单例urlcach","(发error消息)","(发失败error消息)","(发成功的消息)","*)cachedrespons","*)request;","*)sharedurlcache;","*instanc","+","+(instancetype)shared{",".","....",".......","05","1","1.","1.单例是披着羊皮的全局的可变状态","1:","2","2.","2.在多线程并行的情况下,任何其他地方都可以对改单例做修改","20","2018","2:","3","3.永久态是单元测试的天敌","3:","4.","5.","=","==",">","@end","@interfac","@synchronized(self)","[[self","[[targetclass","^{","again","alloc]","bug","dispatch_once(&once,","dispatch_once_t","dispatch_once运用","error","find","forrequest:(nsurlrequest","gcd","git","hope","id","init];","instanc","instance;","introduct","life","live","nil)","nil;","once;","over","proud","return","sharedinst","sharedinstance;","spurlcach","start","static","step","strength","targetclass","toast","volatil","you'r","{","}","});","一个工作学习笔记本","主要是考虑到线程安全,同步创建(即按顺序创建,已创建则不创建,用static修饰,所以全局只能创建一个对象出来).","代码未更改,","以前一直习惯用笔纸做笔记,手写代码,这样感觉方便记忆,也有自己独特的味道,瞬间联想到记笔记时的思路.","但是有时候查询是个大问题,所以决定开始使用gitbook.","使用@synchron","刚开始:","单例对象一旦创建,由于单例对象指针是存放在静态区,","单例对象在堆中分配的内存只有在程序终止后才能被释放,过多的使用会消耗内存.","单例应该只用来保存全局的状态，并且不能和任何作用域绑定.如果这些状态的作用域比一个完整的应用程序的生命周期要短,那么这个状态就不能用单例来管理.","单例滥用的坏处","单例的两种写法","客户端","导引","成功回调处理","成功回调处理(因为单例的url","持久化状态是单元测试的敌人，因为单元测试在各个测试用例相互独立的情况下才有效。如果状态从一个测试用例传递到了另外一个，这样就和测试用例的执行顺序就有关系了。有","服务端","没看什么教程,喜欢探索,比较粗糙,不过能达到轻松记录,方便查询的目的就好","测试顺序改为","的测试用例，尤其是那些本来不应该通过的测试用例，是非常糟糕的事情。","缓存了成功的response)","缓存失败response)","过段时间:","避免并行可能创建出两个."],"pipeline":["stopWordFilter","stemmer"]},"store":{"./":{"url":"./","title":"导引","keywords":"","body":"一个工作学习笔记本\n   以前一直习惯用笔纸做笔记,手写代码,这样感觉方便记忆,也有自己独特的味道,瞬间联想到记笔记时的思路.\n   但是有时候查询是个大问题,所以决定开始使用Gitbook. 没看什么教程,喜欢探索,比较粗糙,不过能达到轻松记录,方便查询的目的就好\n单例滥用的坏处 2018-05-20\n1.单例是披着羊皮的全局的可变状态\n2.在多线程并行的情况下,任何其他地方都可以对改单例做修改\n3.永久态是单元测试的天敌\n\n@interface SPURLCache\n + (SPCache *)sharedURLCache;\n- (void)storeCachedResponse:(NSCachedURLResponse *)cachedResponse forRequest:(NSURLRequest *)request;\n@end \n\n刚开始:\n     step 1: 服务端 (发error消息)-> 客户端 toast error (单例URLCache 缓存失败response)\n     step 2: .......\n     step 3: 服务端 (发成功的消息)-> 客户端 成功回调处理\n过段时间: 代码未更改, 测试顺序改为 3-> 1 -> 2\n     step 3: 服务端 (发成功的消息)-> 客户端 成功回调处理\n     step 1: 服务端 (发失败error消息) - > 客户端 成功回调处理(因为单例的URL 缓存了成功的response)\n     step 2: ....\n 持久化状态是单元测试的敌人，因为单元测试在各个测试用例相互独立的情况下才有效。如果状态从一个测试用例传递到了另外一个，这样就和测试用例的执行顺序就有关系了。有 bug 的测试用例，尤其是那些本来不应该通过的测试用例，是非常糟糕的事情。\n4. 单例对象一旦创建,由于单例对象指针是存放在静态区, 单例对象在堆中分配的内存只有在程序终止后才能被释放,过多的使用会消耗内存. \n5. 单例应该只用来保存全局的状态，并且不能和任何作用域绑定.如果这些状态的作用域比一个完整的应用程序的生命周期要短,那么这个状态就不能用单例来管理.\n单例的两种写法\n1.\n+(instancetype)shared{\nvolatile static targetClass *instance = nil;\nif (instance == nil) {\n    @synchronized(self) {\n        if (instance == nil) {\n            instance = [[targetClass alloc] init];\n        }\n    }\n}\nreturn instance;\n}\n使用@synchronized 主要是考虑到线程安全,同步创建(即按顺序创建,已创建则不创建,用static修饰,所以全局只能创建一个对象出来). 避免并行可能创建出两个.\n2. GCD dispatch_once运用\n+ (instancetype)sharedInstance\n{\n    static dispatch_once_t once;\n    static id sharedInstance;\n    dispatch_once(&once, ^{\n          sharedInstance = [[self alloc] init];\n    });\n    return sharedInstance;\n }\n"}}}